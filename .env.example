# ============================================
# ENVIRONMENT CONFIGURATION
# ============================================
NODE_ENV=development
PORT=4000
APP_NAME=ShopWise Scraping Service
LOG_LEVEL=info

# ============================================
# DATABASE (SHARED WITH BACKEND)
# ============================================
MONGODB_URI=mongodb://localhost:27017/shopwise
MONGODB_TEST_URI=mongodb://localhost:27017/shopwise_test
MONGODB_POOL_SIZE=10

# ============================================
# REDIS (FOR QUEUES & CACHING)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# BACKEND API INTEGRATION
# ============================================
BACKEND_API_URL=http://localhost:5000/api/v1
BACKEND_API_TIMEOUT=10000

# ============================================
# CATEGORY AUTO-CREATION
# ============================================
# ID of "Unmapped Products" parent category
# Run: node scripts/create-unmapped-category.js in backend to get this ID
UNMAPPED_CATEGORY_ID=

# ============================================
# BROWSER CONFIGURATION
# ============================================
BROWSER_HEADLESS=true
BROWSER_TIMEOUT=30000
MAX_CONCURRENT_PAGES=5
BROWSER_POOL_SIZE=3

# ============================================
# PROXY CONFIGURATION (Optional)
# ============================================
PROXY_ENABLED=false
PROXY_URL=
PROXY_USERNAME=
PROXY_PASSWORD=

# ============================================
# SCRAPING CONFIGURATION
# ============================================
MAX_RETRIES=3
RETRY_INITIAL_DELAY=1000
RATE_LIMIT_RPM=30
DELAY_BETWEEN_REQUESTS=2000

# ============================================
# CACHE CONFIGURATION
# ============================================
CACHE_ENABLED=true
CACHE_TTL=3600

# ============================================
# QUEUE CONFIGURATION
# ============================================
QUEUE_ATTEMPTS=3
QUEUE_BACKOFF_DELAY=1000
QUEUE_REMOVE_ON_COMPLETE=100
QUEUE_REMOVE_ON_FAIL=100

# ============================================
# MONITORING & DEBUGGING
# ============================================
ENABLE_SCREENSHOTS=true
SCREENSHOT_DIR=./logs
HTML_DUMP_DIR=./data/html-dumps

# Logging
LOG_LEVEL=info
LOG_FILE_MAX_SIZE=5242880
LOG_FILE_MAX_FILES=5

# Queue Configuration
BULL_REDIS_DB=1
BULL_REMOVE_ON_COMPLETE=true
BULL_REMOVE_ON_FAIL=false
CONCURRENT_JOBS=5

# Scheduling
ENABLE_SCHEDULED_SCRAPING=true
DAILY_SCRAPE_CRON=0 2 * * *
HOURLY_PRICE_UPDATE_CRON=0 * * * *

# API Configuration (Internal API)
ENABLE_API=true
API_KEY=your-internal-api-key-change-this

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60000

# Anti-Detection
ENABLE_STEALTH_MODE=true
RANDOMIZE_VIEWPORT=true
SIMULATE_HUMAN_BEHAVIOR=true

# Data Storage
SAVE_RAW_HTML=false
DEDUPLICATE_PRODUCTS=true

# Platforms
ENABLED_PLATFORMS=daraz-pk,priceoye,telemart,homeshopping

# Performance
CONNECTION_POOL_SIZE=10
REQUEST_TIMEOUT=30000

# Feature Flags
ENABLE_REVIEW_SCRAPING=true
ENABLE_SELLER_SCRAPING=true
ENABLE_SPECIFICATION_EXTRACTION=true
